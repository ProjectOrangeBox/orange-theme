function doSort(t,e){var a=parseFloat(t.attr("data-sortcolumn")),r=lookupSortContext(e),o=r.bsSort,n=t.attr("colspan");if(n){var s=parseFloat(t.data("mainsort"))||0,l=parseFloat(t.data("sortkey").split("-").pop());if(e.find("thead tr").length-1>l)return void doSort(e.find('[data-sortkey="'+(a+s)+"-"+(l+1)+'"]'),e);a+=s}var i=t.attr("data-defaultsign")||signClass;if(e.find("th").each(function(){$(this).removeClass("up").removeClass("down").addClass("nosort")}),$.browser.mozilla){var d=e.find("div.mozilla");void 0!==d&&(d.find(".sign").remove(),d.parent().html(d.html())),t.wrapInner('<div class="mozilla"></div>'),t.children().eq(0).append('<span class="sign '+i+'"></span>')}else e.find("span.sign").remove(),t.append('<span class="sign '+i+'"></span>');var c=t.attr("data-sortkey"),u="desc"!==t.attr("data-firstsort")?"desc":"asc";r.lastSort=c,o[c]="asc"===(o[c]||u)?"desc":"asc","desc"===o[c]?(t.find("span.sign").addClass("up"),t.addClass("up").removeClass("down nosort")):t.addClass("down").removeClass("up nosort");var f=e.children("tbody").children("tr");0!=f.length&&defaultSortEngine(f,{selector:"td:nth-child("+(a+1)+")",order:o[c],data:"value"}),e.find("td.sorted, th.sorted").removeClass("sorted"),f.find("td:eq("+a+")").addClass("sorted"),t.addClass("sorted")}function lookupSortContext(t){var e=t.data("bootstrap-sortable-context");return void 0===e&&(e={bsSort:[],lastSort:void 0},t.find('thead th[data-defaultsort!="disabled"]').each(function(){var t=$(this),a=t.attr("data-sortkey");e.bsSort[a]=t.attr("data-defaultsort"),void 0!==e.bsSort[a]&&(e.lastSort=a)}),t.data("bootstrap-sortable-context",e)),e}function defaultSortEngine(t,e){tinysort(t,e)}!function(t,e){"use strict";function a(){return e}"function"==typeof define&&define.amd?define("tinysort",a):t.tinysort=e}(this,function(){"use strict";function t(t,n){function d(){0===arguments.length?b({}):r(arguments,function(t){b(a(t)?{selector:t}:t)}),m=z.length}function b(t){var e=!!t.selector,a=e&&":"===t.selector[0],r=o(t||{},g);z.push(o({hasSelector:e,hasAttr:!(r.attr===i||""===r.attr),hasData:r.data!==i,hasFilter:a,sortReturnNumber:"asc"===r.order?1:-1},r))}function S(){r(t,function(t,e){E?E!==t.parentNode&&(q=!1):E=t.parentNode;var a=z[0],r=a.hasFilter,o=a.selector,n=!o||r&&t.matchesSelector(o)||o&&t.querySelector(o),s=n?N:A,l={elm:t,pos:e,posn:s.length};k.push(l),s.push(l)}),x=N.slice(0)}function y(){N.sort(w)}function w(t,o){var n=0;for(0!==v&&(v=0);0===n&&m>v;){var i=z[v],d=i.ignoreDashes?h:f;if(r(p,function(t){var e=t.prepare;e&&e(i)}),i.sortFunction)n=i.sortFunction(t,o);else if("rand"==i.order)n=Math.random()<.5?1:-1;else{var c=l,g=e(t,i),b=e(o,i),S=""===g||g===s,y=""===b||b===s;if(g===b)n=0;else if(i.emptyEnd&&(S||y))n=S&&y?0:S?1:-1;else{if(!i.forceStrings){var w=a(g)?g&&g.match(d):l,C=a(b)?b&&b.match(d):l;if(w&&C){var x=g.substr(0,g.length-w[0].length),E=b.substr(0,b.length-C[0].length);x==E&&(c=!l,g=u(w[0]),b=u(C[0]))}}n=g===s||b===s?0:b>g?-1:g>b?1:0}}r(p,function(t){var e=t.sort;e&&(n=e(i,c,g,b,n))}),n*=i.sortReturnNumber,0===n&&v++}return 0===n&&(n=t.pos>o.pos?1:-1),n}function C(){var t=N.length===k.length;q&&t?D?N.forEach(function(t,e){t.elm.style.order=e}):(N.forEach(function(t){F.appendChild(t.elm)}),E.appendChild(F)):(N.forEach(function(t){var e=t.elm,a=c.createElement("div");t.ghost=a,e.parentNode.insertBefore(a,e)}),N.forEach(function(t,e){var a=x[e].ghost;a.parentNode.insertBefore(t.elm,a),a.parentNode.removeChild(a)}))}a(t)&&(t=c.querySelectorAll(t)),0===t.length&&console.warn("No elements to sort");var x,E,F=c.createDocumentFragment(),k=[],N=[],A=[],z=[],q=!0,D=t.length&&(n===s||n.useFlex!==!1)&&-1!==getComputedStyle(t[0].parentNode,null).display.indexOf("flex");return d.apply(i,Array.prototype.slice.call(arguments,1)),S(),y(),C(),N.map(function(t){return t.elm})}function e(t,e){var r,o=t.elm;return e.selector&&(e.hasFilter?o.matchesSelector(e.selector)||(o=i):o=o.querySelector(e.selector)),e.hasAttr?r=o.getAttribute(e.attr):e.useVal?r=o.value||o.getAttribute("value"):e.hasData?r=o.getAttribute("data-"+e.data):o&&(r=o.textContent),a(r)&&(e.cases||(r=r.toLowerCase()),r=r.replace(/\s+/g," ")),r}function a(t){return"string"==typeof t}function r(t,e){for(var a,r=t.length,o=r;o--;)a=r-o-1,e(t[a],a)}function o(t,e,a){for(var r in e)(a||t[r]===s)&&(t[r]=e[r]);return t}function n(t,e,a){p.push({prepare:t,sort:e,sortBy:a})}var s,l=!1,i=null,d=window,c=d.document,u=parseFloat,f=/(-?\d+\.?\d*)\s*$/g,h=/(\d+\.?\d*)\s*$/g,p=[],m=0,v=0,g={selector:i,order:"asc",attr:i,data:i,useVal:l,place:"start",returns:l,cases:l,forceStrings:l,ignoreDashes:l,sortFunction:i,useFlex:l,emptyEnd:l};return d.Element&&function(t){t.matchesSelector=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector||function(t){for(var e=this,a=(e.parentNode||e.document).querySelectorAll(t),r=-1;a[++r]&&a[r]!=e;);return!!a[r]}}(Element.prototype),o(n,{loop:r}),o(t,{plugin:n,defaults:g})}()),function(t){{var e,a;t(document)}if(t.bootstrapSortable=function(r,o,n){var s="undefined"!=typeof moment;e=o?o:"arrow","default"==n&&(n=defaultSortEngine),a=n||a||defaultSortEngine,t("table.sortable").each(function(){var e=t(this);r=r===!0,e.find("span.sign").remove(),e.find("thead [colspan]").each(function(){for(var e=parseFloat(t(this).attr("colspan")),a=1;e>a;a++)t(this).after('<th class="colspan-compensate">')}),e.find("thead [rowspan]").each(function(){for(var e=t(this),a=parseFloat(e.attr("rowspan")),r=1;a>r;r++){var o=e.parent("tr"),n=o.next("tr"),s=o.children().index(e);n.children().eq(s).before('<th class="rowspan-compensate">')}}),e.find("thead tr").each(function(e){t(this).find("th").each(function(a){var r=t(this);r.addClass("nosort").removeClass("up down"),r.attr("data-sortcolumn",a),r.attr("data-sortkey",a+"-"+e)})}),e.find("thead .rowspan-compensate, .colspan-compensate").remove(),e.find("td").each(function(){var e=t(this);void 0!==e.attr("data-dateformat")&&s?e.attr("data-value",moment(e.text(),e.attr("data-dateformat")).format("YYYY/MM/DD/HH/mm/ss")):void 0===e.attr("data-value")&&e.attr("data-value",e.text())});var a=lookupSortContext(e),o=a.bsSort;e.find('thead th[data-defaultsort!="disabled"]').each(function(){var e=t(this),n=e.closest("table.sortable");e.data("sortTable",n);var s=e.attr("data-sortkey"),l=r?a.lastSort:-1;o[s]=r?o[s]:e.attr("data-defaultsort"),void 0!==o[s]&&r===(s===l)&&(o[s]="asc"===o[s]?"desc":"asc",doSort(e,n))}),e.trigger("sorted")})},!t.browser){t.browser={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1};var r=navigator.userAgent;t.each(t.browser,function(e){t.browser[e]=new RegExp(e,"i").test(r)?!0:!1,t.browser.mozilla&&"mozilla"===e&&(t.browser.mozilla=new RegExp("firefox","i").test(r)?!0:!1),t.browser.chrome&&"safari"===e&&(t.browser.safari=!1)})}t(t.bootstrapSortable)}(jQuery);var signClass="arrow";