!function(t,e){"use strict";"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function($){return e($)}):e(t.jQuery)}(this,function($){"use strict";var t=function(t,e){this.$element=$(t),this.options=$.extend({},$.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=$(this.options.menu),this.$appendTo=this.options.appendTo?$(this.options.appendTo):null,this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1};t.prototype={constructor:t,select:function(){var t=this.$menu.find(".active").data("value");if(this.$element.data("active",t),this.autoSelect||t){var e=this.updater(t);e||(e=""),this.$element.val(this.displayText(e)||e).change(),this.afterSelect(e)}return this.hide()},updater:function(t){return t},setSource:function(t){this.source=t},show:function(){var t=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),e;e="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;var s;return s=this.shown?this.$menu:this.$appendTo?this.$menu.appendTo(this.$appendTo):this.$menu.insertAfter(this.$element),s.css({top:t.top+t.height+e,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var e;if(this.query=void 0!==t&&null!==t?t:this.$element.val()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var s=$.proxy(function(){$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(s,this.delay)},process:function(t){var e=this;return t=$.grep(t,function(t){return e.matcher(t)}),t=this.sorter(t),t.length||this.options.addItem?(t.length>0?this.$element.data("active",t[0]):this.$element.data("active",null),this.options.addItem&&t.push(this.options.addItem),"all"==this.options.items?this.render(t).show():this.render(t.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(t){return~this.displayText(t).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e=[],s=[],i=[],o;o=t.shift();){var n=this.displayText(o);n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?s.push(o):i.push(o):e.push(o)}return e.concat(s,i)},highlighter:function(t){var e=$("<div></div>"),s=this.query,i=t.toLowerCase().indexOf(s.toLowerCase()),o,n,h,r,a;if(0===(o=s.length))return e.text(t).html();for(;i>-1;)n=t.substr(0,i),h=t.substr(i,o),r=t.substr(i+o),a=$("<strong></strong>").text(h),e.append(document.createTextNode(n)).append(a),t=r,i=t.toLowerCase().indexOf(s.toLowerCase());return e.append(document.createTextNode(t)).html()},render:function(t){var e=this,s=this,i=!1,o=[],n=e.options.separator;return $.each(t,function(e,s){e>0&&s[n]!==t[e-1][n]&&o.push({__type:"divider"}),!s[n]||0!==e&&s[n]===t[e-1][n]||o.push({__type:"category",name:s[n]}),o.push(s)}),t=$(o).map(function(t,o){if("category"==(o.__type||!1))return $(e.options.headerHtml).text(o.name)[0];if("divider"==(o.__type||!1))return $(e.options.headerDivider)[0];var n=s.displayText(o);return t=$(e.options.item).data("value",o),t.find("a").html(e.highlighter(n,o)),n==s.$element.val()&&(t.addClass("active"),s.$element.data("active",o),i=!0),t[0]}),this.autoSelect&&!i&&(t.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",t.first().data("value"))),this.$menu.html(t),this},displayText:function(t){return void 0!==t&&void 0!==t.name&&t.name||t},next:function(t){var e=this.$menu.find(".active").removeClass("active"),s=e.next();s.length||(s=$(this.$menu.find("li")[0])),s.addClass("active")},prev:function(t){var e=this.$menu.find(".active").removeClass("active"),s=e.prev();s.length||(s=this.$menu.find("li").last()),s.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("input",$.proxy(this.input,this)).on("keyup",$.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",$.proxy(this.keydown,this)),this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown)switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:if(t.shiftKey)return;t.preventDefault(),this.prev();break;case 40:if(t.shiftKey)return;t.preventDefault(),this.next();break}},keydown:function(t){this.suppressKeyPressRepeat=~$.inArray(t.keyCode,[40,38,9,13,27]),this.shown||40!=t.keyCode?this.move(t):this.lookup()},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},input:function(t){this.lookup(),t.preventDefault()},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break}t.preventDefault()},focus:function(t){this.focused||(this.focused=!0,this.options.showHintOnFocus&&this.lookup())},blur:function(t){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.preventDefault(),this.select(),this.$element.focus(),this.hide()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),$(t.currentTarget).addClass("active")},mouseleave:function(t){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var e=$.fn.typeahead;$.fn.typeahead=function(e){var s=arguments;return"string"==typeof e&&"getActive"==e?this.data("active"):this.each(function(){var i=$(this),o=i.data("typeahead"),n="object"==typeof e&&e;o||i.data("typeahead",o=new t(this,n)),"string"==typeof e&&o[e]&&(s.length>1?o[e].apply(o,Array.prototype.slice.call(s,1)):o[e]())})},$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:$.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},$.fn.typeahead.Constructor=t,$.fn.typeahead.noConflict=function(){return $.fn.typeahead=e,this},$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var e=$(this);e.data("typeahead")||e.typeahead(e.data())})});