var orange=orange||{};orange.dialog=orange.dialog||{},orange.dialog.button_submit_click=function(o,r){if(o.preventDefault(),orange.that=$(r),orange.form_obj=orange.that.closest("form"),orange.form_obj.data("confirm")){var a=1!=orange.form_obj.data("confirm")?orange.form_obj.data("confirm").split("|"):"",e=a[0]?a[0]:"Are you sure?",t=a[1]?a[1]:"",n=a[2]?a[2]:"exclamation-triangle",i=a[3]?a[3]:"Cancel",g=a[4]?a[4]:"Ok";orange.dialog.show(n,e,t,i,g)}else orange.dialog.confirm_ok(o,r)},orange.dialog.request_fail=function(){orange.flash_msg("Action Failed","red",!1)},orange.dialog.request_done=function(o){if($.noticeRemoveAll(),o.ci_errors.count>0){for(var r="",a=0,e=o.ci_errors.records.length;a<e;a++)r+=o.ci_errors.records[a]+"<br>";$.noticeAdd({text:r,type:"danger",stay:!0})}else{orange.that.closest(orange.form_obj.data("fadeout"))&&orange.that.closest(orange.form_obj.data("fadeout")).addClass("info");var t=orange.form_obj.data("primary_id")?orange.form_obj.data("primary_id"):"id";if(o.primary_key&&$("input[name="+t+"]").val(o.primary_key),orange.form_obj.data("success")){var n=orange.form_obj.data("success").split("|"),i=!!orange.form_obj.data("redirect")||"false"!==n[2]&&orange.form_obj.attr("action");orange.flash_msg(n[0],n[1],i),"post"==orange.form_obj.attr("method").toLowerCase()&&orange.form_obj.attr("method","PATCH")}if(orange.that.closest(orange.form_obj.data("fadeout"))&&orange.that.closest(orange.form_obj.data("fadeout")).fadeOut(),orange.form_obj.data("redirect")){var i=orange.form_obj.data("redirect");"action"==i&&(i=orange.form_obj.attr("action")),orange.redirect(i)}}},orange.dialog.confirm_ok=function(){console.log(orange.form_obj.attr("action")),orange.dialog.request=$.ajax({method:orange.form_obj.attr("method"),url:orange.form_obj.attr("action"),data:orange.form_obj.serializeArray(),dataType:"json",cache:!1,timeout:5e3,async:!0}),orange.dialog.request.fail(function(){orange.dialog.request_fail()}),orange.dialog.request.done(function(o){void 0===o?orange.flash_msg("Unknown Reply","yellow",!1):orange.dialog.request_done(o)})},$(".js-button-submit").on("click",function(o){orange.dialog.button_submit_click(o,this)}),orange.form={},orange.form.success=function(o){var r=!0;if($.noticeRemoveAll(),o.ci_errors.count>0){for(var a="",e=0,t=o.ci_errors.records.length;e<t;e++)a+=o.ci_errors.records[e]+"<br>";$.noticeAdd({text:a,type:"danger",stay:!0}),r=!1}return r},orange.form.request_done=function(o,r){},orange.form.submit=function(o,r,a){orange.form.request=$.ajax({method:o,url:r,data:a,dataType:"json",cache:!1,timeout:5e3,async:!0}),orange.form.request.fail(function(){orange.dialog.request_fail()}),orange.form.request.done(function(o){void 0===o?orange.flash_msg("Unknown Reply","yellow",!1):orange.form.request_done(o,orange.form.success(o))})};