var orange=orange||{},orange_form_error_group=orange_form_error_group||!1;orange.dialog=orange.dialog||{},orange.form=orange.form||{},orange.dialog.button_submit_click=function(r,o){if(r.preventDefault(),orange.that=$(o),orange.form_obj=orange.that.closest("form"),orange.form_obj.data("confirm")){var e=1!=orange.form_obj.data("confirm")?orange.form_obj.data("confirm").split("|"):"",a=e[0]?e[0]:"Are you sure?",n=e[1]?e[1]:"",t=e[2]?e[2]:"exclamation-triangle",g=e[3]?e[3]:"Cancel",i=e[4]?e[4]:"Ok";orange.dialog.show(t,a,n,g,i)}else orange.dialog.confirm_ok(r,o)},orange.dialog.request_fail=function(){orange.flash_msg("Action Failed","red",!1)},orange.dialog.request_done=function(r){if($.noticeRemoveAll(),orange.form.has_error(r.ci_errors)){var o=orange.form.get_errors(r.ci_errors);for(var e in o)$.noticeAdd({text:o[e],type:"danger",stay:!0})}else{orange.that.closest(orange.form_obj.data("fadeout"))&&orange.that.closest(orange.form_obj.data("fadeout")).addClass("info");var a=orange.form_obj.data("primary_id")?orange.form_obj.data("primary_id"):"id";if(r.primary_key&&$("input[name="+a+"]").val(r.primary_key),orange.form_obj.data("success")){var n=orange.form_obj.data("success").split("|"),t=!!orange.form_obj.data("redirect")||"false"!==n[2]&&orange.form_obj.attr("action");orange.flash_msg(n[0],n[1],t),"post"==orange.form_obj.attr("method").toLowerCase()&&orange.form_obj.attr("method","PATCH")}if(orange.that.closest(orange.form_obj.data("fadeout"))&&orange.that.closest(orange.form_obj.data("fadeout")).fadeOut(),orange.form_obj.data("redirect"))"action"==(t=orange.form_obj.data("redirect"))&&(t=orange.form_obj.attr("action")),orange.redirect(t)}},orange.dialog.confirm_ok=function(){orange.dialog.request=$.ajax({method:orange.form_obj.attr("method"),url:orange.form_obj.attr("action"),data:orange.form_obj.serializeArray(),dataType:"json",cache:!1,timeout:5e3,async:!0}),orange.dialog.request.fail(function(){orange.dialog.request_fail()}),orange.dialog.request.done(function(r){void 0===r?orange.flash_msg("Unknown Reply","yellow",!1):orange.dialog.request_done(r)})},$(".js-button-submit").on("click",function(r){orange.dialog.button_submit_click(r,this)}),orange.form.success=function(r){var o=!0;if($.noticeRemoveAll(),orange.form.has_error(r.ci_errors)){var e=orange.form.get_errors(r.ci_errors);for(var a in e)$.noticeAdd({text:e[a],type:"danger",stay:!0});o=!1}return o},orange.form.request_done=function(r,o){},orange.form.submit=function(r,o,e){orange.form.request=$.ajax({method:r,url:o,data:e,dataType:"json",cache:!1,timeout:5e3,async:!0}),orange.form.request.fail(function(){orange.dialog.request_fail()}),orange.form.request.done(function(r){void 0===r?orange.flash_msg("Unknown Reply","yellow",!1):orange.form.request_done(r,orange.form.success(r))})},orange.form.has_error=function(r,o){return 0!=orange.form.get_errors(r,o,"").length},orange.form.get_errors=function(r,o,e){var a=[],n=!1;if(orange_form_error_group&&(o=orange_form_error_group),null==o)for(var t in n=!0,r)r.hasOwnProperty(t)&&(group=orange.form.get_error(r,t,e))&&a.push(group);if(Array.isArray(o))for(var g in n=!0,o)(group=orange.form.get_error(r,g,e))&&a.push(group);return 0==n&&(group=orange.form.get_error(r,o,e))&&a.push(group),a},orange.form.get_error=function(r,o,e){e=e||"<br>";var a=!1;if(r[o]){var n=[];for(var t in r[o])n.push(r[o][t]);n.length>0&&(a=n.join(e))}return a};
//# sourceMappingURL=rest-form.min.js.map